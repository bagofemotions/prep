<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<body>

    <div layout:fragment="content">
        
        <div th:replace="~{fragments/ui :: pageHeader(title='Users', subtitle='Manage system access and roles')}"></div>

        <div th:replace="~{fragments/ui :: cardWrapper(title='System Users', showHeader=true)}">
            
            <div class="d-flex justify-content-between mb-3">
                <div class="w-50">
                    <div th:replace="~{fragments/forms :: searchBar(url='/users/search', target='#userTable')}"></div>
                </div>
                <button class="btn btn-primary" 
                        hx-get="/users/create" 
                        hx-target="#modal-content-target" 
                        data-bs-toggle="modal" 
                        data-bs-target="#genericModal">
                    <i class="bi bi-plus-lg me-2"></i> Add New User
                </button>
            </div>

            <div class="table-responsive">
                <table class="table table-hover align-middle" id="userTable">
                    <thead class="table-light">
                        <tr>
                            <th>Name</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th class="text-end">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="u : ${users.content}">
                            <td>
                                <div class="d-flex align-items-center gap-2">
                                    <div th:replace="~{fragments/ui :: avatar(imageUrl=null, name=${u.fullName})}"></div>
                                    <div>
                                        <div class="fw-bold" th:text="${u.fullName}">Name</div>
                                        <div class="small text-muted" th:text="${u.email}">Email</div>
                                    </div>
                                </div>
                            </td>
                            <td th:text="${u.role}">Admin</td>
                            <td>
                                <div th:replace="~{fragments/ui :: statusBadge(status=${u.status})}"></div>
                            </td>
                            <td class="text-end">
                                <button class="btn btn-sm btn-light text-primary"
                                        th:hx-get="@{/users/edit/{id}(id=${u.id})}"
                                        hx-target="#modal-content-target"
                                        data-bs-toggle="modal" 
                                        data-bs-target="#genericModal">
                                    <i class="bi bi-pencil"></i>
                                </button>

                                <button class="btn btn-sm btn-light text-danger"
                                        th:hx-delete="@{/users/delete/{id}(id=${u.id})}"
                                        hx-confirm="Are you sure you want to delete this user?"
                                        hx-target="body">
                                    <i class="bi bi-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div th:replace="~{fragments/ui :: pagination(page=${users}, baseUrl='/users')}"></div>

        </div>
    </div>

    <div th:replace="~{fragments/ui :: modalDialog(id='genericModal', title='User Details')}"></div>

</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

    <div th:fragment="inputText(label, name, type, placeholder, value, required, readonly)" class="form-group">
        <label th:for="${name}">
            <span th:text="${label}">Label</span>
            <span th:if="${required}" class="text-danger">*</span>
        </label>
        <div class="input-wrapper">
            <input th:type="${type} ?: 'text'" 
                   th:id="${name}" 
                   th:name="${name}" 
                   th:value="${value}"
                   th:placeholder="${placeholder}"
                   th:required="${required}"
                   th:readonly="${readonly}"
                   class="form-control">
            <i th:if="${type == 'password'}" class='bx bx-show toggle-password' 
               onclick="togglePassword(this)"></i>
        </div>
        <small class="error-msg text-danger" th:if="${#fields.hasErrors(name)}" th:errors="*{__${name}__}"></small>
    </div>

    <div th:fragment="textarea(label, name, placeholder, rows, value)" class="form-group">
        <label th:for="${name}" th:text="${label}">Label</label>
        <textarea th:id="${name}" 
                  th:name="${name}" 
                  th:rows="${rows} ?: 4" 
                  th:placeholder="${placeholder}" 
                  th:text="${value}"
                  class="form-control"></textarea>
    </div>

    <div th:fragment="select(label, name, options, selectedValue)" class="form-group">
        <label th:for="${name}" th:text="${label}">Label</label>
        <div class="select-wrapper">
            <select th:id="${name}" th:name="${name}" class="form-control">
                <option value="" disabled th:selected="${selectedValue == null}">Select Option</option>
                <option th:each="opt : ${options}" 
                        th:value="${opt.key}" 
                        th:text="${opt.value}"
                        th:selected="${opt.key == selectedValue}"></option>
            </select>
            <i class='bx bx-chevron-down arrow-icon'></i>
        </div>
    </div>

    <div th:fragment="toggle(label, name, checked)" class="form-group toggle-group">
        <span th:text="${label}" class="toggle-label">Active?</span>
        <label class="switch-generic">
            <input type="checkbox" th:id="${name}" th:name="${name}" th:checked="${checked}">
            <span class="slider round"></span>
        </label>
    </div>

    <div th:fragment="file-upload(label, name, accept)" class="form-group">
        <label th:text="${label}">Upload</label>
        <div class="file-upload-wrapper">
            <input type="file" th:id="${name}" th:name="${name}" th:accept="${accept}" class="file-input">
            <div class="file-custom-label">
                <i class='bx bx-cloud-upload'></i>
                <span>Choose a file...</span>
            </div>
        </div>
    </div>

    <div th:fragment="search-bar(placeholder, hxUrl, hxTarget)" class="search-box">
        <i class='bx bx-search'></i>
        <input type="text" 
               th:placeholder="${placeholder}"
               th:attr="hx-get=${hxUrl}, hx-target=${hxTarget}"
               hx-trigger="keyup changed delay:500ms"
               name="search">
    </div>

    <button th:fragment="btn-submit(text, extraClass)" type="submit" 
            class="btn-primary" 
            th:classappend="${extraClass}">
        <span th:text="${text}">Save</span>
        <i class="bx bx-loader-alt bx-spin htmx-indicator"></i>
    </button>
	
	<div th:fragment="radioGroup(label, name, options, checkedValue)" class="mb-3">
	        <label class="form-label d-block" th:text="${label}">Label</label>
	        <div class="form-check form-check-inline" th:each="opt : ${options}">
	            <input class="form-check-input" type="radio" 
	                   th:name="${name}" 
	                   th:id="${name} + '-' + ${opt.key}" 
	                   th:value="${opt.key}"
	                   th:checked="${opt.key == checkedValue}">
	            <label class="form-check-label" th:for="${name} + '-' + ${opt.key}" th:text="${opt.value}">Option</label>
	        </div>
	    </div>

	    <div th:fragment="inputDate(label, name, value, required)" class="mb-3">
	        <label th:for="${name}" class="form-label">
	            <span th:text="${label}">Date</span>
	            <span th:if="${required}" class="text-danger">*</span>
	        </label>
	        <input type="date" class="form-control" th:id="${name}" th:name="${name}" th:value="${value}" th:required="${required}">
	    </div>

	    <div th:fragment="tagInput(tags)" class="mb-3">
	        <label class="form-label">Selected Tags:</label>
	        <div class="d-flex flex-wrap gap-2 p-2 border rounded bg-light">
	            <span th:each="tag : ${tags}" class="badge bg-primary d-flex align-items-center">
	                <span th:text="${tag}">Tag Name</span>
	                <i class="bi bi-x ms-2 cursor-pointer" onclick="this.parentElement.remove()" style="cursor: pointer;"></i>
	            </span>
	            <input type="text" class="border-0 bg-transparent flex-grow-1" style="outline: none; min-width: 100px;" placeholder="Add tag...">
	        </div>
	    </div>

	    <div th:fragment="filterGroup(searchUrl)" class="d-flex justify-content-between align-items-center mb-4 gap-3">
	        <div class="flex-grow-1">
	            <div th:replace="~{fragments/forms :: searchBar(url=${searchUrl}, target='#main-table')}"></div>
	        </div>
	        <div class="d-flex gap-2">
	           <button class="btn btn-outline-secondary"><i class="bi bi-funnel"></i> Filters</button>
	        </div>
	    </div>

</body>
</html><div th:if="${error}" class="error" th:text="${error}"></div>
<div th:if="${success}" th:text="${success}"></div><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

    <nav th:fragment="sidebar(activeLink)" id="sidebar" class="col-md-3 col-lg-2 d-md-block collapse show">
        <div class="brand">
            <i class="bi bi-grid-1x2-fill me-2"></i> <span>My App</span>
        </div>
        
        <ul class="side-menu">
            <li th:classappend="${activeLink == 'dashboard'} ? 'active'">
                <a href="/dashboard"><i class="bi bi-speedometer2 me-2"></i> Dashboard</a>
            </li>
            <li th:classappend="${activeLink == 'users'} ? 'active'">
                <a href="/users"><i class="bi bi-people me-2"></i> Users</a>
            </li>
            <li th:classappend="${activeLink == 'reports'} ? 'active'">
                <a href="/reports"><i class="bi bi-bar-chart me-2"></i> Reports</a>
            </li>
            <li th:classappend="${activeLink == 'settings'} ? 'active'">
                <a href="/settings"><i class="bi bi-gear me-2"></i> Settings</a>
            </li>

            <li class="mt-4 border-top pt-2">
                <a href="#" class="text-danger" hx-post="/logout" hx-trigger="click" hx-target="body">
                    <i class="bi bi-box-arrow-left me-2"></i> Logout
                </a>
            </li>
        </ul>
    </nav>


    <nav th:fragment="topNav" class="w-100 d-flex align-items-center px-4 py-2 border-bottom bg-white">
        <i class="bi bi-list fs-4 me-3 cursor-pointer toggle-sidebar" style="cursor: pointer;"></i>

        <div class="d-none d-md-block text-muted small">
            <span th:text="${#dates.format(#dates.createNow(), 'EEEE, d MMMM yyyy')}">Date</span>
        </div>

        <div class="ms-auto d-flex align-items-center gap-3">
            <a href="#" class="text-decoration-none text-muted"><i class="bi bi-bell fs-5"></i></a>
            <div class="dropdown">
                <a href="#" class="d-flex align-items-center text-decoration-none dropdown-toggle" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="https://ui-avatars.com/api/?name=Admin+User&background=random" alt="Profile" width="32" height="32" class="rounded-circle me-2">
                    <span class="text-dark fw-bold small">Admin User</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end shadow-sm border-0" aria-labelledby="profileDropdown">
                    <li><a class="dropdown-item small" href="/settings?tab=General">Profile</a></li>
                    <li><a class="dropdown-item small" href="/settings?tab=Notifications">Notifications</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item small text-danger" href="#" hx-post="/logout" hx-target="body">Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>


    <footer th:fragment="footer" class="mt-auto py-3 text-center text-muted small border-top bg-light">
        <div class="container">
            <span>&copy; 2025 My App Inc. All rights reserved.</span>
            <span class="mx-2">|</span>
            <a href="#" class="text-muted text-decoration-none">Privacy Policy</a>
        </div>
    </footer>

</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

    <a th:fragment="btn-link(text, url, icon)" th:href="@{${url}}" class="btn-primary">
        <i th:if="${icon}" th:class="'bx ' + ${icon}"></i>
        <span th:text="${text}">Link</span>
    </a>

    <button th:fragment="btn-icon(icon, color, hxUrl)" 
            class="btn-icon" 
            th:style="'color: var(--' + ${color} + ')'"
            th:attr="hx-get=${hxUrl}">
        <i th:class="'bx ' + ${icon}"></i>
    </button>

    <li th:fragment="stat-card(title, value, icon, color)">
        <i class='bx' th:classappend="${icon}" 
           th:style="'background: var(--light-' + ${color} + '); color: var(--' + ${color} + ');'"></i>
        <span class="text">
            <h3 th:text="${value}">0</h3>
            <p th:text="${title}">Title</p>
        </span>
    </li>

    <span th:fragment="badge(text, status)" 
          class="status-badge" 
          th:classappend="${status}" 
          th:text="${text}">Pending</span>

    <div th:fragment="avatar(imgUrl, name)" class="avatar-wrapper">
        <img th:if="${imgUrl != null}" th:src="${imgUrl}" alt="User">
        <span th:if="${imgUrl == null}" class="avatar-initials" 
              th:text="${#strings.substring(name,0,2).toUpperCase()}">AB</span>
    </div>

    <div th:fragment="empty-state(message)" class="empty-state">
        <i class='bx bx-folder-open'></i>
        <p th:text="${message}">No records found.</p>
    </div>

    <div th:fragment="alert(type, message)" th:class="'alert alert-' + ${type}" role="alert">
        <i class='bx' th:classappend="${type == 'success' ? 'bxs-check-circle' : 'bxs-error-circle'}"></i>
        <span th:text="${message}">Message</span>
        <button type="button" class="close-btn" onclick="this.parentElement.remove()">&times;</button>
    </div>

    <div th:fragment="modal(id, title)" th:id="${id}" class="modal-backdrop">
        <div class="modal-content">
            <div class="modal-header">
                <h3 th:text="${title}">Title</h3>
                <span class="close-modal" onclick="closeModal(this)">&times;</span>
            </div>
            <div class="modal-body" id="modal-target-body"></div>
        </div>
    </div>

    <ul th:fragment="breadcrumb(pathMap)" class="breadcrumb">
        <li th:each="item : ${pathMap}">
            <a th:href="@{${item.value}}" th:text="${item.key}" th:class="${itemStat.last} ? 'active' : ''"></a>
            <i th:unless="${itemStat.last}" class='bx bx-chevron-right'></i>
        </li>
    </ul>

    <div th:fragment="tabs(tabList, activeTab)" class="tab-container">
        <div class="tabs">
            <a th:each="tab : ${tabList}" 
               th:text="${tab.label}" 
               th:classappend="${tab.id == activeTab} ? 'active' : ''"
               class="tab-item"></a>
        </div>
    </div>

    <div th:fragment="accordion-item(title, contentId)" class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">
            <span th:text="${title}">Title</span>
            <i class='bx bx-chevron-down'></i>
        </button>
        <div class="accordion-body" style="display:none;">
             <th:block th:replace="${contentId}"></th:block>
        </div>
    </div>

    <div th:fragment="timeline(events)" class="timeline">
        <div th:each="event : ${events}" class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <small th:text="${event.date}" class="text-muted">Date</small>
                <h5 th:text="${event.title}">Title</h5>
                <p th:text="${event.description}">Desc</p>
            </div>
        </div>
    </div>

    <div th:fragment="stepper(steps, currentStepIndex)" class="stepper">
        <div th:each="step, iter : ${steps}" 
             class="step" 
             th:classappend="${iter.index <= currentStepIndex} ? 'completed' : ''">
            <div class="step-circle" th:text="${iter.count}">1</div>
            <div class="step-label" th:text="${step}">Step Name</div>
            <div th:unless="${iter.last}" class="step-line"></div>
        </div>
    </div>

    <div th:fragment="skeleton-row" class="skeleton-row">
        <div class="skeleton-block w-full"></div>
    </div>

    <div th:fragment="skeleton-card" class="skeleton-card">
        <div class="skeleton-icon"></div>
        <div class="skeleton-text">
            <div class="skeleton-line short"></div>
            <div class="skeleton-line long"></div>
        </div>
    </div>
	
	<a th:fragment="btnPrimary(text, url)" th:href="@{${url}}" class="btn btn-primary">
	        <span th:text="${text}">Action</span>
	    </a>

	    <a th:fragment="btnSecondary(text, url)" th:href="@{${url}}" class="btn btn-outline-secondary">
	        <span th:text="${text}">Cancel</span>
	    </a>

	    <a th:fragment="linkButton(text, url)" th:href="@{${url}}" class="text-decoration-none fw-bold text-primary px-2">
	        <span th:text="${text}">Link</span>
	    </a>


	    <div th:fragment="cardWrapper(title, showHeader)" class="card shadow-sm border-0 mb-4">
	        <div th:if="${showHeader}" class="card-header bg-white border-bottom-0 pt-3 pb-0">
	            <h5 class="card-title fw-bold" th:text="${title}">Card Title</h5>
	        </div>
	        <div class="card-body">
	            <div th:replace="${bodyContent} ?: _"></div> 
	        </div>
	    </div>

	    <div th:fragment="divider(text)" class="d-flex align-items-center my-4">
	        <hr class="flex-grow-1 m-0">
	        <span th:if="${text != null}" class="px-3 text-muted small text-uppercase" th:text="${text}">OR</span>
	        <hr th:if="${text != null}" class="flex-grow-1 m-0">
	    </div>

	    <div th:fragment="gridGallery(items)" class="row row-cols-1 row-cols-md-3 g-4">
	        <div th:each="item : ${items}" class="col">
	            <div class="card h-100">
	                <div class="card-body" th:text="${item}">Item</div>
	            </div>
	        </div>
	    </div>


	    <nav th:fragment="breadcrumbs(crumbs)" aria-label="breadcrumb">
	        <ol class="breadcrumb">
	            <li class="breadcrumb-item"><a href="/">Home</a></li>
	            <li th:each="crumb, iterStat : ${crumbs}" 
	                class="breadcrumb-item" 
	                th:classappend="${iterStat.last} ? 'active'"
	                th:aria-current="${iterStat.last} ? 'page'">
	                <a th:if="${!iterStat.last}" th:href="@{${crumb.value}}" th:text="${crumb.key}">Link</a>
	                <span th:if="${iterStat.last}" th:text="${crumb.key}">Current</span>
	            </li>
	        </ol>
	    </nav>

	    <div th:fragment="pageHeader(title, subtitle)" class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
	        <div>
	            <h2 class="fw-bold mb-0" th:text="${title}">Page Title</h2>
	            <p class="text-muted small mb-0" th:text="${subtitle}">Subtitle here</p>
	        </div>
	        <div>
	            </div>
	    </div>

	    <ul th:fragment="tabs(tabs, activeTab)" class="nav nav-tabs mb-4">
	        <li class="nav-item" th:each="tab : ${tabs}">
	            <a class="nav-link" 
	               th:classappend="${tab.key == activeTab} ? 'active fw-bold' : 'text-muted'" 
	               th:href="@{${tab.value}}" 
	               th:text="${tab.key}">Tab Name</a>
	        </li>
	    </ul>


	    <div th:fragment="alertToast(type, message)" 
	         class="alert alert-dismissible fade show" 
	         th:classappend="'alert-' + ${type}" role="alert">
	        <i class="bi" th:classappend="${type == 'success'} ? 'bi-check-circle' : 'bi-exclamation-triangle'"></i>
	        <span class="ms-2" th:text="${message}">Message</span>
	        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	    </div>

	    <div th:fragment="progressBar(percentage, label)" class="mb-3">
	        <div class="d-flex justify-content-between small mb-1">
	            <span th:text="${label}">Processing...</span>
	            <span th:text="${percentage} + '%'">0%</span>
	        </div>
	        <div class="progress" style="height: 8px;">
	            <div class="progress-bar" role="progressbar" 
	                 th:style="'width: ' + ${percentage} + '%'" 
	                 th:aria-valuenow="${percentage}" aria-valuemin="0" aria-valuemax="100"></div>
	        </div>
	    </div>

	    <div th:fragment="loaderOverlay(id)" th:id="${id}" class="d-none position-fixed top-0 start-0 w-100 h-100 bg-white opacity-75 d-flex justify-content-center align-items-center" style="z-index: 9999;">
	        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;"></div>
	    </div>

	    <div th:fragment="stepper(steps, currentStepIndex)" class="d-flex justify-content-between mb-5 position-relative">
	        <div class="position-absolute top-50 start-0 w-100 translate-middle-y bg-light" style="height: 4px; z-index: 0;"></div>
	        <div th:each="step, iter : ${steps}" class="position-relative text-center" style="z-index: 1;">
	            <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-2 fw-bold border"
	                 style="width: 35px; height: 35px;"
	                 th:classappend="${iter.index <= currentStepIndex} ? 'bg-primary text-white border-primary' : 'bg-white text-muted border-secondary'"
	                 th:text="${iter.count}">1</div>
	            <span class="small fw-bold" 
	                  th:classappend="${iter.index <= currentStepIndex} ? 'text-dark' : 'text-muted'"
	                  th:text="${step}">Step Name</span>
	        </div>
	    </div>

	    <div th:fragment="codeBlock(codeId, content)" class="position-relative bg-dark text-light p-3 rounded font-monospace small">
	        <button class="btn btn-sm btn-light position-absolute top-0 end-0 m-2" 
	                onclick="navigator.clipboard.writeText(this.nextElementSibling.innerText)">Copy</button>
	        <pre class="m-0" th:text="${content}">UUID-1234-5678</pre>
	    </div>

	    <div th:fragment="skeletonCard" class="card h-100 border-0 shadow-sm" aria-hidden="true">
	        <div class="card-body">
	            <h5 class="card-title placeholder-glow">
	                <span class="placeholder col-6"></span>
	            </h5>
	            <p class="card-text placeholder-glow">
	                <span class="placeholder col-7"></span>
	                <span class="placeholder col-4"></span>
	                <span class="placeholder col-4"></span>
	                <span class="placeholder col-6"></span>
	            </p>
	        </div>
	    </div>

	    <span th:fragment="tooltip(text)" class="d-inline-block" tabindex="0" data-bs-toggle="tooltip" th:title="${text}">
	        <i class="bi bi-question-circle-fill text-muted"></i>
	    </span>

	    <div th:fragment="dataTableSimple(headers, rows)" class="table-responsive">
	        <table class="table table-hover align-middle">
	            <thead class="table-light">
	                <tr>
	                    <th th:each="header : ${headers}" th:text="${header}">Header</th>
	                </tr>
	            </thead>
	            <tbody>
	                <tr th:if="${#lists.isEmpty(rows)}">
	                    <td th:colspan="${#lists.size(headers)}" class="text-center">No data available</td>
	                </tr>
	            </tbody>
	        </table>
	    </div>

	    <dl th:fragment="descriptionList(dataMap)" class="row">
	        <th:block th:each="entry : ${dataMap}">
	            <dt class="col-sm-3 text-muted" th:text="${entry.key}">Label</dt>
	            <dd class="col-sm-9" th:text="${entry.value}">Value</dd>
	        </th:block>
	    </dl>

</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Login - My App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script src="https://unpkg.com/htmx.org@1.9.5"></script>
</head>
<body class="bg-light d-flex align-items-center justify-content-center" style="height: 100vh;">

    <div class="card shadow-sm border-0 p-4" style="width: 100%; max-width: 400px;">
        <div class="card-body">
            
            <div class="text-center mb-4">
                <h4 class="fw-bold text-primary">My App</h4>
                <p class="text-muted small">Welcome back! Please login.</p>
            </div>

            <div th:if="${param.error}">
                 <div th:replace="~{fragments/ui :: alertToast(type='danger', message='Invalid username or password.')}"></div>
            </div>

            <div th:if="${param.logout}">
                 <div th:replace="~{fragments/ui :: alertToast(type='success', message='You have been logged out.')}"></div>
            </div>

            <form th:action="@{/login}" method="post">
                
                <div th:replace="~{fragments/forms :: inputText(
                    label='Username', name='username', type='text', placeholder='admin', value='', required=true, readonly=false
                )}"></div>

                <div th:replace="~{fragments/forms :: inputText(
                    label='Password', name='password', value='', type='password', placeholder='password', value='', required=true, readonly=false
                )}"></div>

                <div class="d-grid mt-4">
                    <button type="submit" class="btn btn-primary btn-lg">Sign In</button>
                </div>
            </form>
        </div>
    </div>

</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

    <div th:fragment="userForm">
        <form th:action="@{/users/save}" th:object="${user}" method="post">
            
            <input type="hidden" th:field="*{id}">

            <div class="row">
                <div class="col-md-12">
                    <div th:replace="~{fragments/forms :: inputText(
                        label='Full Name', name='fullName', value=*{fullName}, type='text', placeholder='John Doe', required=true
                    )}"></div>
                </div>
                
                <div class="col-md-12">
                    <div th:replace="~{fragments/forms :: inputText(
                        label='Email Address', name='email', value=*{email}, type='email', placeholder='john@example.com', required=true
                    )}"></div>
                </div>

                <div class="col-md-6">
                    <div th:replace="~{fragments/forms :: selectField(
                        label='Role', name='role', 
                        options=${ {'Admin':'Admin', 'Editor':'Editor', 'Viewer':'Viewer'} }, 
                        selectedValue=*{role}
                    )}"></div>
                </div>

                <div class="col-md-6">
                     <div th:replace="~{fragments/forms :: radioGroup(
                        label='Status', name='status', 
                        options=${ {'Active':'Active', 'Inactive':'Inactive'} }, 
                        checkedValue=*{status}
                     )}"></div>
                </div>
            </div>

            <div class="modal-footer px-0 pb-0 border-0 mt-3">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary">Save User</button>
            </div>

        </form>
    </div>

</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

    <div th:fragment="inputText(label, name, type, placeholder, value, required, readonly)" class="form-group">
        <label th:for="${name}">
            <span th:text="${label}">Label</span>
            <span th:if="${required}" class="text-danger">*</span>
        </label>
        <div class="input-wrapper">
            <input th:type="${type} ?: 'text'" 
                   th:id="${name}" 
                   th:name="${name}" 
                   th:value="${value}"
                   th:placeholder="${placeholder}"
                   th:required="${required}"
                   th:readonly="${readonly}"
                   class="form-control">
            <i th:if="${type == 'password'}" class='bx bx-show toggle-password' 
               onclick="togglePassword(this)"></i>
        </div>
		<small class="error-msg text-danger"
		       th:if="${#fields != null and #fields.hasErrors(name)}"
		       th:errors="*{__${name}__}">
		</small>
    </div>

    <div th:fragment="textarea(label, name, placeholder, rows, value)" class="form-group">
        <label th:for="${name}" th:text="${label}">Label</label>
        <textarea th:id="${name}" 
                  th:name="${name}" 
                  th:rows="${rows} ?: 4" 
                  th:placeholder="${placeholder}" 
                  th:text="${value}"
                  class="form-control"></textarea>
    </div>

    <div th:fragment="select(label, name, options, selectedValue)" class="form-group">
        <label th:for="${name}" th:text="${label}">Label</label>
        <div class="select-wrapper">
            <select th:id="${name}" th:name="${name}" class="form-control">
                <option value="" disabled th:selected="${selectedValue == null}">Select Option</option>
                <option th:each="opt : ${options}" 
                        th:value="${opt.key}" 
                        th:text="${opt.value}"
                        th:selected="${opt.key == selectedValue}"></option>
            </select>
            <i class='bx bx-chevron-down arrow-icon'></i>
        </div>
    </div>

    <div th:fragment="toggle(label, name, checked)" class="form-group toggle-group">
        <span th:text="${label}" class="toggle-label">Active?</span>
        <label class="switch-generic">
            <input type="checkbox" th:id="${name}" th:name="${name}" th:checked="${checked}">
            <span class="slider round"></span>
        </label>
    </div>

    <div th:fragment="file-upload(label, name, accept)" class="form-group">
        <label th:text="${label}">Upload</label>
        <div class="file-upload-wrapper">
            <input type="file" th:id="${name}" th:name="${name}" th:accept="${accept}" class="file-input">
            <div class="file-custom-label">
                <i class='bx bx-cloud-upload'></i>
                <span>Choose a file...</span>
            </div>
        </div>
    </div>

    <div th:fragment="search-bar(placeholder, hxUrl, hxTarget)" class="search-box">
        <i class='bx bx-search'></i>
        <input type="text" 
               th:placeholder="${placeholder}"
               th:attr="hx-get=${hxUrl}, hx-target=${hxTarget}"
               hx-trigger="keyup changed delay:500ms"
               name="search">
    </div>

    <button th:fragment="btn-submit(text, extraClass)" type="submit" 
            class="btn-primary" 
            th:classappend="${extraClass}">
        <span th:text="${text}">Save</span>
        <i class="bx bx-loader-alt bx-spin htmx-indicator"></i>
    </button>
	
	<div th:fragment="radioGroup(label, name, options, checkedValue)" class="mb-3">
	        <label class="form-label d-block" th:text="${label}">Label</label>
	        <div class="form-check form-check-inline" th:each="opt : ${options}">
	            <input class="form-check-input" type="radio" 
	                   th:name="${name}" 
	                   th:id="${name} + '-' + ${opt.key}" 
	                   th:value="${opt.key}"
	                   th:checked="${opt.key == checkedValue}">
	            <label class="form-check-label" th:for="${name} + '-' + ${opt.key}" th:text="${opt.value}">Option</label>
	        </div>
	    </div>

	    <div th:fragment="inputDate(label, name, value, required)" class="mb-3">
	        <label th:for="${name}" class="form-label">
	            <span th:text="${label}">Date</span>
	            <span th:if="${required}" class="text-danger">*</span>
	        </label>
	        <input type="date" class="form-control" th:id="${name}" th:name="${name}" th:value="${value}" th:required="${required}">
	    </div>

	    <div th:fragment="tagInput(tags)" class="mb-3">
	        <label class="form-label">Selected Tags:</label>
	        <div class="d-flex flex-wrap gap-2 p-2 border rounded bg-light">
	            <span th:each="tag : ${tags}" class="badge bg-primary d-flex align-items-center">
	                <span th:text="${tag}">Tag Name</span>
	                <i class="bi bi-x ms-2 cursor-pointer" onclick="this.parentElement.remove()" style="cursor: pointer;"></i>
	            </span>
	            <input type="text" class="border-0 bg-transparent flex-grow-1" style="outline: none; min-width: 100px;" placeholder="Add tag...">
	        </div>
	    </div>

	    <div th:fragment="filterGroup(searchUrl)" class="d-flex justify-content-between align-items-center mb-4 gap-3">
	        <div class="flex-grow-1">
	            <div th:replace="~{fragments/forms :: searchBar(url=${searchUrl}, target='#main-table')}"></div>
	        </div>
	        <div class="d-flex gap-2">
	           <button class="btn btn-outline-secondary"><i class="bi bi-funnel"></i> Filters</button>
	        </div>
	    </div>

</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Delete Confirmation Modal -->
<div th:fragment="deleteModal" class="modal fade" id="deleteConfirmModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" th:classappend="${hasChildren} ? 'bg-warning' : 'bg-danger text-white'">
                <h5 class="modal-title">
                    <i class="bi bi-exclamation-triangle-fill"></i>
                    <span th:if="${!hasChildren}">Confirm Delete</span>
                    <span th:if="${hasChildren}">Warning: Has Children</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            
            <div class="modal-body">
                <!-- No Children - Simple Delete -->
                <div th:if="${!hasChildren}">
                    <p class="lead">
                        Are you sure you want to delete this <strong th:text="${entityType}">entity</strong>?
                    </p>
                    <div class="alert alert-info mb-0">
                        <strong>Name:</strong> <span th:text="${entityName}">Entity Name</span>
                    </div>
                </div>
                
                <!-- Has Children - Warning -->
                <div th:if="${hasChildren}">
                    <div class="alert alert-warning">
                        <h6 class="alert-heading">
                            <i class="bi bi-exclamation-triangle-fill"></i> 
                            This <span th:text="${entityType}">entity</span> has children!
                        </h6>
                        <p class="mb-0">
                            <strong th:text="${entityName}">Entity Name</strong> has 
                            <strong th:text="${childCount}">0</strong> 
                            <span th:text="${childType}">children</span> associated with it.
                        </p>
                    </div>
                    
                    <p><strong>You have two options:</strong></p>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card border-danger mb-3">
                                <div class="card-body">
                                    <h6 class="card-title text-danger">
                                        <i class="bi bi-x-circle"></i> Simple Delete
                                    </h6>
                                    <p class="card-text small">
                                        This will fail because the <span th:text="${entityType}">entity</span> 
                                        still has <span th:text="${childType}">children</span>.
                                    </p>
                                    <p class="card-text small text-muted">
                                        You must delete all <span th:text="${childType}">children</span> first.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="card border-danger mb-3">
                                <div class="card-body">
                                    <h6 class="card-title text-danger">
                                        <i class="bi bi-trash-fill"></i> Cascade Delete
                                    </h6>
                                    <p class="card-text small">
                                        This will delete the <span th:text="${entityType}">entity</span> 
                                        <strong>AND ALL</strong> <span th:text="${childCount}">0</span> 
                                        <span th:text="${childType}">children</span>.
                                    </p>
                                    <p class="card-text small text-danger">
                                        <strong>⚠️ This action cannot be undone!</strong>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="bi bi-x-circle"></i> Cancel
                </button>
                
                <!-- Simple Delete Button -->
                <form th:if="${!hasChildren}" 
                      th:action="${deleteUrl}" 
                      method="post" 
                      style="display: inline;">
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash"></i> Delete
                    </button>
                </form>
                
                <!-- Cascade Delete Button (only if has children) -->
                <form th:if="${hasChildren}" 
                      th:action="${cascadeDeleteUrl}" 
                      method="post" 
                      style="display: inline;"
                      onsubmit="return confirm('⚠️ FINAL WARNING: This will permanently delete the ' + 
                                               document.querySelector('[data-entity-name]').textContent + 
                                               ' and ALL its children. This cannot be undone! Are you absolutely sure?');">
                    <button type="submit" class="btn btn-danger">
                        <i class="bi bi-trash-fill"></i> Cascade Delete All
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Hidden data for JavaScript -->
<span th:attr="data-entity-name=${entityName}" style="display: none;"></span>

</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

    <a th:fragment="btn-link(text, url, icon)" th:href="@{${url}}" class="btn-primary">
        <i th:if="${icon}" th:class="'bx ' + ${icon}"></i>
        <span th:text="${text}">Link</span>
    </a>

    <button th:fragment="btn-icon(icon, color, hxUrl)" 
            class="btn-icon" 
            th:style="'color: var(--' + ${color} + ')'"
            th:attr="hx-get=${hxUrl}">
        <i th:class="'bx ' + ${icon}"></i>
    </button>

    <li th:fragment="stat-card(title, value, icon, color)">
        <i class='bx' th:classappend="${icon}" 
           th:style="'background: var(--light-' + ${color} + '); color: var(--' + ${color} + ');'"></i>
        <span class="text">
            <h3 th:text="${value}">0</h3>
            <p th:text="${title}">Title</p>
        </span>
    </li>

    <span th:fragment="badge(text, status)" 
          class="status-badge" 
          th:classappend="${status}" 
          th:text="${text}">Pending</span>

    <div th:fragment="avatar(imgUrl, name)" class="avatar-wrapper">
        <img th:if="${imgUrl != null}" th:src="${imgUrl}" alt="User">
        <span th:if="${imgUrl == null}" class="avatar-initials" 
              th:text="${#strings.substring(name,0,2).toUpperCase()}">AB</span>
    </div>

    <div th:fragment="empty-state(message)" class="empty-state">
        <i class='bx bx-folder-open'></i>
        <p th:text="${message}">No records found.</p>
    </div>

    <div th:fragment="alert(type, message)" th:class="'alert alert-' + ${type}" role="alert">
        <i class='bx' th:classappend="${type == 'success' ? 'bxs-check-circle' : 'bxs-error-circle'}"></i>
        <span th:text="${message}">Message</span>
        <button type="button" class="close-btn" onclick="this.parentElement.remove()">&times;</button>
    </div>

    <div th:fragment="modal(id, title)" th:id="${id}" class="modal-backdrop">
        <div class="modal-content">
            <div class="modal-header">
                <h3 th:text="${title}">Title</h3>
                <span class="close-modal" onclick="closeModal(this)">&times;</span>
            </div>
            <div class="modal-body" id="modal-target-body"></div>
        </div>
    </div>

    <ul th:fragment="breadcrumb(pathMap)" class="breadcrumb">
        <li th:each="item : ${pathMap}">
            <a th:href="@{${item.value}}" th:text="${item.key}" th:class="${itemStat.last} ? 'active' : ''"></a>
            <i th:unless="${itemStat.last}" class='bx bx-chevron-right'></i>
        </li>
    </ul>

    <div th:fragment="tabs(tabList, activeTab)" class="tab-container">
        <div class="tabs">
            <a th:each="tab : ${tabList}" 
               th:text="${tab.label}" 
               th:classappend="${tab.id == activeTab} ? 'active' : ''"
               class="tab-item"></a>
        </div>
    </div>

    <div th:fragment="accordion-item(title, contentId)" class="accordion-item">
        <button class="accordion-header" onclick="toggleAccordion(this)">
            <span th:text="${title}">Title</span>
            <i class='bx bx-chevron-down'></i>
        </button>
        <div class="accordion-body" style="display:none;">
             <th:block th:replace="${contentId}"></th:block>
        </div>
    </div>

    <div th:fragment="timeline(events)" class="timeline">
        <div th:each="event : ${events}" class="timeline-item">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <small th:text="${event.date}" class="text-muted">Date</small>
                <h5 th:text="${event.title}">Title</h5>
                <p th:text="${event.description}">Desc</p>
            </div>
        </div>
    </div>

    <div th:fragment="stepper(steps, currentStepIndex)" class="stepper">
        <div th:each="step, iter : ${steps}" 
             class="step" 
             th:classappend="${iter.index <= currentStepIndex} ? 'completed' : ''">
            <div class="step-circle" th:text="${iter.count}">1</div>
            <div class="step-label" th:text="${step}">Step Name</div>
            <div th:unless="${iter.last}" class="step-line"></div>
        </div>
    </div>

    <div th:fragment="skeleton-row" class="skeleton-row">
        <div class="skeleton-block w-full"></div>
    </div>

    <div th:fragment="skeleton-card" class="skeleton-card">
        <div class="skeleton-icon"></div>
        <div class="skeleton-text">
            <div class="skeleton-line short"></div>
            <div class="skeleton-line long"></div>
        </div>
    </div>
	
	<a th:fragment="btnPrimary(text, url)" th:href="@{${url}}" class="btn btn-primary">
	        <span th:text="${text}">Action</span>
	    </a>

	    <a th:fragment="btnSecondary(text, url)" th:href="@{${url}}" class="btn btn-outline-secondary">
	        <span th:text="${text}">Cancel</span>
	    </a>

	    <a th:fragment="linkButton(text, url)" th:href="@{${url}}" class="text-decoration-none fw-bold text-primary px-2">
	        <span th:text="${text}">Link</span>
	    </a>


	    <div th:fragment="cardWrapper(title, showHeader)" class="card shadow-sm border-0 mb-4">
	        <div th:if="${showHeader}" class="card-header bg-white border-bottom-0 pt-3 pb-0">
	            <h5 class="card-title fw-bold" th:text="${title}">Card Title</h5>
	        </div>
	        <div class="card-body">
	            <div th:replace="${bodyContent} ?: _"></div> 
	        </div>
	    </div>

	    <div th:fragment="divider(text)" class="d-flex align-items-center my-4">
	        <hr class="flex-grow-1 m-0">
	        <span th:if="${text != null}" class="px-3 text-muted small text-uppercase" th:text="${text}">OR</span>
	        <hr th:if="${text != null}" class="flex-grow-1 m-0">
	    </div>

	    <div th:fragment="gridGallery(items)" class="row row-cols-1 row-cols-md-3 g-4">
	        <div th:each="item : ${items}" class="col">
	            <div class="card h-100">
	                <div class="card-body" th:text="${item}">Item</div>
	            </div>
	        </div>
	    </div>


	    <nav th:fragment="breadcrumbs(crumbs)" aria-label="breadcrumb">
	        <ol class="breadcrumb">
	            <li class="breadcrumb-item"><a href="/">Home</a></li>
	            <li th:each="crumb, iterStat : ${crumbs}" 
	                class="breadcrumb-item" 
	                th:classappend="${iterStat.last} ? 'active'"
	                th:aria-current="${iterStat.last} ? 'page'">
	                <a th:if="${!iterStat.last}" th:href="@{${crumb.value}}" th:text="${crumb.key}">Link</a>
	                <span th:if="${iterStat.last}" th:text="${crumb.key}">Current</span>
	            </li>
	        </ol>
	    </nav>

	    <div th:fragment="pageHeader(title, subtitle)" class="d-flex justify-content-between align-items-center mb-4 border-bottom pb-2">
	        <div>
	            <h2 class="fw-bold mb-0" th:text="${title}">Page Title</h2>
	            <p class="text-muted small mb-0" th:text="${subtitle}">Subtitle here</p>
	        </div>
	        <div>
	            </div>
	    </div>

	    <ul th:fragment="tabs(tabs, activeTab)" class="nav nav-tabs mb-4">
	        <li class="nav-item" th:each="tab : ${tabs}">
	            <a class="nav-link" 
	               th:classappend="${tab.key == activeTab} ? 'active fw-bold' : 'text-muted'" 
	               th:href="@{${tab.value}}" 
	               th:text="${tab.key}">Tab Name</a>
	        </li>
	    </ul>


	    <div th:fragment="alertToast(type, message)" 
	         class="alert alert-dismissible fade show" 
	         th:classappend="'alert-' + ${type}" role="alert">
	        <i class="bi" th:classappend="${type == 'success'} ? 'bi-check-circle' : 'bi-exclamation-triangle'"></i>
	        <span class="ms-2" th:text="${message}">Message</span>
	        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
	    </div>

	    <div th:fragment="progressBar(percentage, label)" class="mb-3">
	        <div class="d-flex justify-content-between small mb-1">
	            <span th:text="${label}">Processing...</span>
	            <span th:text="${percentage} + '%'">0%</span>
	        </div>
	        <div class="progress" style="height: 8px;">
	            <div class="progress-bar" role="progressbar" 
	                 th:style="'width: ' + ${percentage} + '%'" 
	                 th:aria-valuenow="${percentage}" aria-valuemin="0" aria-valuemax="100"></div>
	        </div>
	    </div>

	    <div th:fragment="loaderOverlay(id)" th:id="${id}" class="d-none position-fixed top-0 start-0 w-100 h-100 bg-white opacity-75 d-flex justify-content-center align-items-center" style="z-index: 9999;">
	        <div class="spinner-border text-primary" role="status" style="width: 3rem; height: 3rem;"></div>
	    </div>

	    <div th:fragment="stepper(steps, currentStepIndex)" class="d-flex justify-content-between mb-5 position-relative">
	        <div class="position-absolute top-50 start-0 w-100 translate-middle-y bg-light" style="height: 4px; z-index: 0;"></div>
	        <div th:each="step, iter : ${steps}" class="position-relative text-center" style="z-index: 1;">
	            <div class="rounded-circle d-flex align-items-center justify-content-center mx-auto mb-2 fw-bold border"
	                 style="width: 35px; height: 35px;"
	                 th:classappend="${iter.index <= currentStepIndex} ? 'bg-primary text-white border-primary' : 'bg-white text-muted border-secondary'"
	                 th:text="${iter.count}">1</div>
	            <span class="small fw-bold" 
	                  th:classappend="${iter.index <= currentStepIndex} ? 'text-dark' : 'text-muted'"
	                  th:text="${step}">Step Name</span>
	        </div>
	    </div>

	    <div th:fragment="codeBlock(codeId, content)" class="position-relative bg-dark text-light p-3 rounded font-monospace small">
	        <button class="btn btn-sm btn-light position-absolute top-0 end-0 m-2" 
	                onclick="navigator.clipboard.writeText(this.nextElementSibling.innerText)">Copy</button>
	        <pre class="m-0" th:text="${content}">UUID-1234-5678</pre>
	    </div>

	    <div th:fragment="skeletonCard" class="card h-100 border-0 shadow-sm" aria-hidden="true">
	        <div class="card-body">
	            <h5 class="card-title placeholder-glow">
	                <span class="placeholder col-6"></span>
	            </h5>
	            <p class="card-text placeholder-glow">
	                <span class="placeholder col-7"></span>
	                <span class="placeholder col-4"></span>
	                <span class="placeholder col-4"></span>
	                <span class="placeholder col-6"></span>
	            </p>
	        </div>
	    </div>

	    <span th:fragment="tooltip(text)" class="d-inline-block" tabindex="0" data-bs-toggle="tooltip" th:title="${text}">
	        <i class="bi bi-question-circle-fill text-muted"></i>
	    </span>

	    <div th:fragment="dataTableSimple(headers, rows)" class="table-responsive">
	        <table class="table table-hover align-middle">
	            <thead class="table-light">
	                <tr>
	                    <th th:each="header : ${headers}" th:text="${header}">Header</th>
	                </tr>
	            </thead>
	            <tbody>
	                <tr th:if="${#lists.isEmpty(rows)}">
	                    <td th:colspan="${#lists.size(headers)}" class="text-center">No data available</td>
	                </tr>
	            </tbody>
	        </table>
	    </div>

	    <dl th:fragment="descriptionList(dataMap)" class="row">
	        <th:block th:each="entry : ${dataMap}">
	            <dt class="col-sm-3 text-muted" th:text="${entry.key}">Label</dt>
	            <dd class="col-sm-9" th:text="${entry.value}">Value</dd>
	        </th:block>
	    </dl>

</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layout/base :: layout(~{::title}, ~{::content})}">
<head>
    <title>Floor Management - SMT Management</title>
</head>
<body>
<div th:fragment="content">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">Floor Management</h1>
        <a sec:authorize="hasRole('ADMIN')" href="/floors/create" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> Add Floor
        </a>
    </div>
    
    <!-- Alert Messages -->
    <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="bi bi-check-circle"></i> <span th:text="${success}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle"></i> <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    
    <!-- Search Bar -->
    <div class="card mb-4">
        <div class="card-body">
            <form method="get" action="/floors" class="row g-3">
                <div class="col-md-10">
                    <input type="text" name="search" class="form-control" 
                           placeholder="Search floors by name..." 
                           th:value="${search}">
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="bi bi-search"></i> Search
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Floors Table -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-building"></i> Floors
                <span class="badge bg-primary" th:text="${totalItems}">0</span>
            </h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="table-light">
                        <tr>
                            <th>ID</th>
                            <th>Floor Name</th>
                            <th>Number of Lines</th>
                            <th sec:authorize="hasRole('ADMIN')">Actions</th>
                            <th sec:authorize="hasRole('OPERATOR')">View</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${#lists.isEmpty(floors)}">
                            <td colspan="5" class="text-center text-muted">
                                <i class="bi bi-inbox"></i> No floors found
                            </td>
                        </tr>
                        <tr th:each="floor : ${floors}">
                            <td th:text="${floor.id}">1</td>
                            <td>
                                <strong th:text="${floor.name}">Floor Name</strong>
                            </td>
                            <td>
                                <span th:text="${floor.lineCount}">0</span>
                                <span class="text-muted">/ 10</span>
                                <div class="progress mt-1" style="height: 5px;">
                                    <div class="progress-bar" 
                                         th:style="'width: ' + ${floor.lineCount * 10} + '%'"
                                         th:classappend="${floor.lineCount >= 10} ? 'bg-danger' : 'bg-primary'">
                                    </div>
                                </div>
                            </td>
                            <td sec:authorize="hasRole('ADMIN')">
                                <div class="btn-group" role="group">
                                    <a th:href="@{/floors/edit/{id}(id=${floor.id})}" 
                                       class="btn btn-sm btn-outline-primary" 
                                       title="Edit">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                    <button type="button" 
                                            class="btn btn-sm btn-outline-danger" 
                                            th:onclick="'checkDelete(' + ${floor.id} + ')'"
                                            title="Delete">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                                <a th:href="@{/lines(floorId=${floor.id})}" 
                                   class="btn btn-sm btn-outline-success ms-2" 
                                   title="View Lines">
                                    <i class="bi bi-diagram-3"></i> Lines
                                </a>
                            </td>
                            <td sec:authorize="hasRole('OPERATOR')">
                                <a th:href="@{/lines(floorId=${floor.id})}" 
                                   class="btn btn-sm btn-outline-primary" 
                                   title="View Lines">
                                    <i class="bi bi-eye"></i> View Lines
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Pagination -->
            <nav th:if="${totalPages > 1}" aria-label="Floor pagination">
                <ul class="pagination justify-content-center mb-0">
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <a class="page-link" 
                           th:href="@{/floors(page=${currentPage - 1}, search=${search})}">
                            Previous
                        </a>
                    </li>
                    <li class="page-item" 
                        th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                        th:classappend="${i == currentPage} ? 'active'">
                        <a class="page-link" 
                           th:href="@{/floors(page=${i}, search=${search})}"
                           th:text="${i + 1}">1</a>
                    </li>
                    <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                        <a class="page-link" 
                           th:href="@{/floors(page=${currentPage + 1}, search=${search})}">
                            Next
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal Placeholder -->
    <div id="deleteModalContainer"></div>
    
    <script>
        function checkDelete(floorId) {
            fetch('/floors/check-delete/' + floorId)
                .then(response => response.text())
                .then(html => {
                    document.getElementById('deleteModalContainer').innerHTML = html;
                    const modal = new bootstrap.Modal(document.getElementById('deleteConfirmModal'));
                    modal.show();
                })
                .catch(error => console.error('Error:', error));
        }
    </script>
    
</div>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(~{::title}, ~{::content})}">
<head>
    <title th:text="${floor.id != null ? 'Edit Floor' : 'Create Floor'}">Floor Form</title>
</head>
<body>
<div th:fragment="content">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">
            <span th:if="${floor.id == null}">Create New Floor</span>
            <span th:if="${floor.id != null}">Edit Floor</span>
        </h1>
        <a href="/floors" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to List
        </a>
    </div>
    
    <!-- Floor Form -->
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-building"></i> Floor Information
                    </h5>
                </div>
                <div class="card-body">
                    <form th:action="@{/floors/save}" th:object="${floor}" method="post">
                        
                        <!-- Hidden ID field for edit -->
                        <input type="hidden" th:field="*{id}" />
                        
                        <!-- Floor Name -->
                        <div class="mb-3">
                            <label for="name" class="form-label">
                                Floor Name <span class="text-danger">*</span>
                            </label>
                            <input type="text" 
                                   class="form-control" 
                                   id="name" 
                                   th:field="*{name}" 
                                   placeholder="Enter floor name (e.g., Ground Floor, First Floor)"
                                   required
                                   minlength="2"
                                   maxlength="100">
                            <div class="form-text">
                                <i class="bi bi-info-circle"></i> 
                                Floor name must be unique and between 2-100 characters
                            </div>
                        </div>
                        
                        <!-- Current Lines Info (for edit mode) -->
                        <div th:if="${floor.id != null}" class="mb-3">
                            <label class="form-label">Current Lines</label>
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle"></i>
                                This floor currently has <strong th:text="${floor.lineCount}">0</strong> line(s).
                                <span th:if="${floor.lineCount < 10}">
                                    You can add <strong th:text="${10 - floor.lineCount}">10</strong> more line(s).
                                </span>
                                <span th:if="${floor.lineCount >= 10}" class="text-danger">
                                    <br><strong>Maximum limit reached!</strong> Cannot add more lines.
                                </span>
                            </div>
                        </div>
                        
                        <!-- Info Box -->
                        <div class="alert alert-warning">
                            <h6 class="alert-heading">
                                <i class="bi bi-exclamation-triangle"></i> Important Information
                            </h6>
                            <ul class="mb-0">
                                <li>Each floor can have a maximum of <strong>10 lines</strong></li>
                                <li>Floor names must be unique across the system</li>
                                <li>Deleting a floor will also delete all its associated lines and machines</li>
                            </ul>
                        </div>
                        
                        <!-- Form Actions -->
                        <div class="d-flex justify-content-between">
                            <a href="/floors" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i> Cancel
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-save"></i>
                                <span th:if="${floor.id == null}">Create Floor</span>
                                <span th:if="${floor.id != null}">Update Floor</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- View Lines (for edit mode) -->
            <div th:if="${floor.id != null && floor.hasLines()}" class="card mt-3">
                <div class="card-header bg-success text-white">
                    <h6 class="mb-0">
                        <i class="bi bi-diagram-3"></i> Associated Lines
                    </h6>
                </div>
                <div class="card-body">
                    <p>This floor has <strong th:text="${floor.lineCount}">0</strong> line(s) associated with it.</p>
                    <a th:href="@{/lines(floorId=${floor.id})}" class="btn btn-outline-success">
                        <i class="bi bi-eye"></i> View Lines
                    </a>
                </div>
            </div>
        </div>
    </div>
    
</div>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layout/base :: layout(~{::title}, ~{::content})}">
<head>
    <title>Machine Management - SMT Management</title>
</head>
<body>
<div th:fragment="content">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">Machine Management</h1>
        <a sec:authorize="hasRole('ADMIN')" href="/machines/create" class="btn btn-info">
            <i class="bi bi-plus-circle"></i> Add Machine
        </a>
    </div>
    
    <!-- Alert Messages -->
    <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="bi bi-check-circle"></i> <span th:text="${success}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle"></i> <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    
    <!-- Search and Filter Bar -->
    <div class="card mb-4">
        <div class="card-body">
            <form method="get" action="/machines" class="row g-3">
                <div class="col-md-6">
                    <input type="text" name="search" class="form-control" 
                           placeholder="Search by serial, model, or company..." 
                           th:value="${search}">
                </div>
                <div class="col-md-4">
                    <select name="lineId" class="form-select">
                        <option value="">All Lines</option>
                        <option th:each="line : ${lines}" 
                                th:value="${line.id}" 
                                th:text="${line.lineName + ' (Floor: ' + line.floorName + ')'}"
                                th:selected="${line.id == selectedLineId}">
                            Line Name
                        </option>
                    </select>
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="bi bi-search"></i> Search
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Machines Table -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-gear-fill"></i> Machines
                <span class="badge bg-info" th:text="${totalItems}">0</span>
            </h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="table-light">
                        <tr>
                            <th>Serial</th>
                            <th>Model</th>
                            <th>Type</th>
                            <th>Year</th>
                            <th>Company</th>
                            <th>Line</th>
                            <th>Floor</th>
                            <th sec:authorize="hasRole('ADMIN')">Actions</th>
                            <th sec:authorize="hasRole('OPERATOR')">Details</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${#lists.isEmpty(machines)}">
                            <td colspan="9" class="text-center text-muted">
                                <i class="bi bi-inbox"></i> No machines found
                            </td>
                        </tr>
                        <tr th:each="machine : ${machines}">
                            <td>
                                <code th:text="${machine.machineSerial}">SERIAL</code>
                            </td>
                            <td>
                                <strong th:text="${machine.model}">Model</strong>
                            </td>
                            <td>
                                <span class="badge" 
                                      th:classappend="${machine.type.name() == 'TYPE_A'} ? 'bg-primary' : 'bg-secondary'"
                                      th:text="${machine.type.name()}">
                                    Type
                                </span>
                            </td>
                            <td th:text="${machine.yearOfManufacturing}">2020</td>
                            <td th:text="${machine.manufacturingCompany}">Company</td>
                            <td>
                                <span class="badge bg-success" th:text="${machine.lineName}">Line</span>
                            </td>
                            <td>
                                <span class="badge bg-primary" th:text="${machine.floorName}">Floor</span>
                            </td>
                            <td sec:authorize="hasRole('ADMIN')">
                                <div class="btn-group" role="group">
                                    <a th:href="@{/machines/edit/{serial}(serial=${machine.machineSerial})}" 
                                       class="btn btn-sm btn-outline-primary" 
                                       title="Edit">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                    <form th:action="@{/machines/delete/{serial}(serial=${machine.machineSerial})}" 
                                          method="post" 
                                          style="display: inline;"
                                          onsubmit="return confirm('Are you sure you want to delete machine: ' + 
                                                                    this.closest('tr').querySelector('code').textContent + '?');">
                                        <button type="submit" 
                                                class="btn btn-sm btn-outline-danger" 
                                                title="Delete">
                                            <i class="bi bi-trash"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                            <td sec:authorize="hasRole('OPERATOR')">
                                <button type="button" 
                                        class="btn btn-sm btn-outline-info" 
                                        th:attr="data-serial=${machine.machineSerial},
                                                 data-model=${machine.model},
                                                 data-type=${machine.type.name()},
                                                 data-year=${machine.yearOfManufacturing},
                                                 data-company=${machine.manufacturingCompany},
                                                 data-line=${machine.lineName},
                                                 data-floor=${machine.floorName}"
                                        onclick="showMachineDetails(this)">
                                    <i class="bi bi-eye"></i> View
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Pagination -->
            <nav th:if="${totalPages > 1}" aria-label="Machine pagination">
                <ul class="pagination justify-content-center mb-0">
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <a class="page-link" 
                           th:href="@{/machines(page=${currentPage - 1}, search=${search}, lineId=${selectedLineId})}">
                            Previous
                        </a>
                    </li>
                    <li class="page-item" 
                        th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                        th:classappend="${i == currentPage} ? 'active'">
                        <a class="page-link" 
                           th:href="@{/machines(page=${i}, search=${search}, lineId=${selectedLineId})}"
                           th:text="${i + 1}">1</a>
                    </li>
                    <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                        <a class="page-link" 
                           th:href="@{/machines(page=${currentPage + 1}, search=${search}, lineId=${selectedLineId})}">
                            Next
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    
    <!-- Machine Details Modal (for Operators) -->
    <div class="modal fade" id="machineDetailsModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title">
                        <i class="bi bi-gear"></i> Machine Details
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <table class="table table-bordered mb-0">
                        <tr>
                            <th width="40%">Serial Number</th>
                            <td id="detail-serial">-</td>
                        </tr>
                        <tr>
                            <th>Model</th>
                            <td id="detail-model">-</td>
                        </tr>
                        <tr>
                            <th>Type</th>
                            <td id="detail-type">-</td>
                        </tr>
                        <tr>
                            <th>Year of Manufacturing</th>
                            <td id="detail-year">-</td>
                        </tr>
                        <tr>
                            <th>Manufacturing Company</th>
                            <td id="detail-company">-</td>
                        </tr>
                        <tr>
                            <th>Line</th>
                            <td id="detail-line">-</td>
                        </tr>
                        <tr>
                            <th>Floor</th>
                            <td id="detail-floor">-</td>
                        </tr>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function showMachineDetails(btn) {
            document.getElementById('detail-serial').textContent = btn.dataset.serial;
            document.getElementById('detail-model').textContent = btn.dataset.model;
            document.getElementById('detail-type').textContent = btn.dataset.type;
            document.getElementById('detail-year').textContent = btn.dataset.year;
            document.getElementById('detail-company').textContent = btn.dataset.company;
            document.getElementById('detail-line').textContent = btn.dataset.line;
            document.getElementById('detail-floor').textContent = btn.dataset.floor;
            
            const modal = new bootstrap.Modal(document.getElementById('machineDetailsModal'));
            modal.show();
        }
    </script>
    
</div>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(~{::title}, ~{::content})}">
<head>
    <title th:text="${machine.machineSerial != null ? 'Edit Machine' : 'Create Machine'}">Machine Form</title>
</head>
<body>
<div th:fragment="content">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">
            <span th:if="${machine.machineSerial == null}">Create New Machine</span>
            <span th:if="${machine.machineSerial != null}">Edit Machine</span>
        </h1>
        <a href="/machines" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to List
        </a>
    </div>
    
    <!-- Machine Form -->
    <div class="row">
        <div class="col-md-10 mx-auto">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-gear-fill"></i> Machine Information
                    </h5>
                </div>
                <div class="card-body">
                    <form th:action="@{/machines/save}" th:object="${machine}" method="post">
                        
                        <div class="row">
                            <!-- Left Column -->
                            <div class="col-md-6">
                                <!-- Machine Serial -->
                                <div class="mb-3">
                                    <label for="machineSerial" class="form-label">
                                        Machine Serial Number <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" 
                                           class="form-control" 
                                           id="machineSerial" 
                                           th:field="*{machineSerial}" 
                                           placeholder="Enter serial number (e.g., SMT-2024-001)"
                                           th:readonly="${machine.machineSerial != null}"
                                           required
                                           minlength="3"
                                           maxlength="50">
                                    <div class="form-text">
                                        <i class="bi bi-info-circle"></i> 
                                        <span th:if="${machine.machineSerial == null}">
                                            Serial must be unique (3-50 characters)
                                        </span>
                                        <span th:if="${machine.machineSerial != null}" class="text-warning">
                                            <strong>Serial number cannot be changed after creation</strong>
                                        </span>
                                    </div>
                                </div>
                                
                                <!-- Model -->
                                <div class="mb-3">
                                    <label for="model" class="form-label">
                                        Model <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" 
                                           class="form-control" 
                                           id="model" 
                                           th:field="*{model}" 
                                           placeholder="Enter model name"
                                           required
                                           minlength="2"
                                           maxlength="100">
                                    <div class="form-text">
                                        <i class="bi bi-info-circle"></i> 
                                        Machine model (2-100 characters)
                                    </div>
                                </div>
                                
                                <!-- Machine Type -->
                                <div class="mb-3">
                                    <label for="type" class="form-label">
                                        Machine Type <span class="text-danger">*</span>
                                    </label>
                                    <select class="form-select" id="type" th:field="*{type}" required>
                                        <option value="">Select type...</option>
                                        <option th:each="machineType : ${machineTypes}" 
                                                th:value="${machineType}" 
                                                th:text="${machineType.name()}">
                                            Type
                                        </option>
                                    </select>
                                    <div class="form-text">
                                        <i class="bi bi-info-circle"></i> 
                                        Select the machine type category
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right Column -->
                            <div class="col-md-6">
                                <!-- Year of Manufacturing -->
                                <div class="mb-3">
                                    <label for="yearOfManufacturing" class="form-label">
                                        Year of Manufacturing <span class="text-danger">*</span>
                                    </label>
                                    <input type="number" 
                                           class="form-control" 
                                           id="yearOfManufacturing" 
                                           th:field="*{yearOfManufacturing}" 
                                           placeholder="Enter year (e.g., 2024)"
                                           required
                                           min="1900"
                                           max="2100">
                                    <div class="form-text">
                                        <i class="bi bi-info-circle"></i> 
                                        Year must be between 1900 and 2100
                                    </div>
                                </div>
                                
                                <!-- Manufacturing Company -->
                                <div class="mb-3">
                                    <label for="manufacturingCompany" class="form-label">
                                        Manufacturing Company <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" 
                                           class="form-control" 
                                           id="manufacturingCompany" 
                                           th:field="*{manufacturingCompany}" 
                                           placeholder="Enter company name"
                                           required
                                           minlength="2"
                                           maxlength="100">
                                    <div class="form-text">
                                        <i class="bi bi-info-circle"></i> 
                                        Company name (2-100 characters)
                                    </div>
                                </div>
                                
                                <!-- Line Selection -->
                                <div class="mb-3">
                                    <label for="lineMapping" class="form-label">
                                        Line <span class="text-danger">*</span>
                                    </label>
                                    <select class="form-select" 
                                            id="lineMapping" 
                                            th:field="*{lineMapping.id}" 
                                            required>
                                        <option value="">Select a line...</option>
                                        <optgroup th:each="line : ${lines}" th:label="${line.lineName}">
                                            <option th:value="${line.id}" 
                                                    th:text="${line.lineName + ' (Machines: ' + line.machineCount + '/10, Floor: ' + line.floorName + ')'}">
                                                Line Name
                                            </option>
                                        </optgroup>
                                    </select>
                                    <div class="form-text">
                                        <i class="bi bi-info-circle"></i> 
                                        Select the line this machine belongs to (max 10 machines per line)
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Info Box -->
                        <div class="alert alert-warning mt-3">
                            <h6 class="alert-heading">
                                <i class="bi bi-exclamation-triangle"></i> Important Information
                            </h6>
                            <ul class="mb-0">
                                <li>Each line can have a maximum of <strong>10 machines</strong></li>
                                <li>Machine serial numbers must be unique across the system</li>
                                <li>Serial numbers cannot be changed after creation</li>
                                <li>All fields marked with <span class="text-danger">*</span> are required</li>
                            </ul>
                        </div>
                        
                        <!-- Form Actions -->
                        <div class="d-flex justify-content-between mt-4">
                            <a href="/machines" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i> Cancel
                            </a>
                            <button type="submit" class="btn btn-info">
                                <i class="bi bi-save"></i>
                                <span th:if="${machine.machineSerial == null}">Create Machine</span>
                                <span th:if="${machine.machineSerial != null}">Update Machine</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- Current Location Info (for edit mode) -->
            <div th:if="${machine.machineSerial != null}" class="card mt-3">
                <div class="card-header bg-info text-white">
                    <h6 class="mb-0">
                        <i class="bi bi-geo-alt"></i> Current Location
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <strong>Floor:</strong>
                            <p th:text="${machine.floorName}">Floor Name</p>
                        </div>
                        <div class="col-md-4">
                            <strong>Line:</strong>
                            <p th:text="${machine.lineName}">Line Name</p>
                        </div>
                        <div class="col-md-4">
                            <strong>Serial:</strong>
                            <p><code th:text="${machine.machineSerial}">SERIAL</code></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
</div>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${CONTENT_TITLE} ?: 'SMT Management'">SMT Management</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <style>
        body {
            background-color: #f8f9fa;
        }
        .navbar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .sidebar {
            min-height: calc(100vh - 56px);
            background-color: #fff;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
        }
        .sidebar .nav-link {
            color: #333;
            padding: 0.75rem 1rem;
            border-left: 3px solid transparent;
        }
        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            background-color: #f8f9fa;
            border-left-color: #667eea;
            color: #667eea;
        }
        .main-content {
            padding: 2rem;
        }
    </style>
</head>
<body>
    <th:block th:fragment="layout(title, content)">
        <!-- Top Navigation Bar -->
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="/dashboard">
                    <i class="bi bi-gear-fill"></i> SMT Management
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <span class="navbar-text text-white me-3">
                                <i class="bi bi-person-circle"></i>
                                <span sec:authentication="name">User</span>
                                <span sec:authorize="hasRole('ADMIN')" class="badge bg-danger ms-1">Admin</span>
                                <span sec:authorize="hasRole('OPERATOR')" class="badge bg-info ms-1">Operator</span>
                            </span>
                        </li>
                        <li class="nav-item">
                            <form method="post" action="/logout" style="display: inline;">
                                <button type="submit" class="btn btn-outline-light btn-sm">
                                    <i class="bi bi-box-arrow-right"></i> Logout
                                </button>
                            </form>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <nav class="col-md-2 d-md-block sidebar p-3">
                    <div class="position-sticky">
                        <ul class="nav flex-column">
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${activeLink == 'dashboard'} ? 'active'" href="/dashboard">
                                    <i class="bi bi-speedometer2"></i> Dashboard
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${activeLink == 'floors'} ? 'active'" href="/floors">
                                    <i class="bi bi-building"></i> Floors
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${activeLink == 'lines'} ? 'active'" href="/lines">
                                    <i class="bi bi-diagram-3"></i> Lines
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" th:classappend="${activeLink == 'machines'} ? 'active'" href="/machines">
                                    <i class="bi bi-gear-fill"></i> Machines
                                </a>
                            </li>
                        </ul>
                    </div>
                </nav>

                <!-- Main Content -->
                <main class="col-md-10 ms-sm-auto main-content">
                    <div th:replace="${content}"></div>
                </main>
            </div>
        </div>

        <!-- Bootstrap JS -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </th:block>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - SMT Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);

            overflow: hidden;
            max-width: 450px;
            width: 100%;
        }
        .login-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        .login-body {
            padding: 2rem;
        }
        .btn-login {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            padding: 0.75rem;
            font-weight: 600;
            color: white;
        }
        .btn-login:hover {
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
            color: white;
        }
    </style>
</head>
<body>

    <div class="login-card">
        <!-- Header -->
        <div class="login-header">
            <i class="bi bi-gear-fill" style="font-size: 3rem;"></i>
            <h2 class="mt-3 mb-0">SMT Management</h2>
            <p class="mb-0">Surface Mount Technology System</p>
        </div>
        
        <!-- Body -->
        <div class="login-body">
            <!-- Alert Messages -->
            <div th:if="${param.logout}" class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="bi bi-check-circle"></i> You have been logged out successfully.
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            
            <div th:if="${param.error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="bi bi-exclamation-triangle"></i> Invalid username or password.
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            
            <!-- Login Form - Uses Spring Security's default form login -->
            <form method="post" action="/perform_login">
                <!-- Username -->
                <div class="mb-3">
                    <label for="username" class="form-label">
                        <i class="bi bi-person"></i> Username
                    </label>
                    <input type="text" 
                           class="form-control" 
                           id="username" 
                           name="username" 
                           placeholder="Enter username"
                           required
                           autofocus>
                </div>
                
                <!-- Password -->
                <div class="mb-4">
                    <label for="password" class="form-label">
                        <i class="bi bi-lock"></i> Password
                    </label>
                    <input type="password" 
                           class="form-control" 
                           id="password" 
                           name="password" 
                           placeholder="Enter password"
                           required>
                </div>
                
                <!-- Submit Button -->
                <button type="submit" class="btn btn-login w-100">
                    <i class="bi bi-box-arrow-in-right"></i> Sign In
                </button>
            </form>
            
            <!-- Demo Credentials -->
            <div class="mt-4">
                <hr>
                <p class="text-muted text-center mb-2">
                    <small><strong>Demo Credentials:</strong></small>
                </p>
                <div class="row text-center">
                    <div class="col-6">
                        <div class="card bg-light">
                            <div class="card-body py-2">
                                <small class="text-primary">
                                    <i class="bi bi-shield-check"></i> <strong>Admin</strong><br>
                                    admin / admin123
                                </small>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card bg-light">
                            <div class="card-body py-2">
                                <small class="text-info">
                                    <i class="bi bi-eye"></i> <strong>Operator</strong><br>
                                    operator / operator123
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(~{::title}, ~{::content})}">
<head>
    <title>Admin Dashboard - SMT Management</title>
</head>
<body>
<div th:fragment="content">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">Admin Dashboard</h1>
        <div class="text-muted">
            <i class="bi bi-shield-check"></i> Administrator Access
        </div>
    </div>
    
    <!-- Statistics Cards -->
    <div class="row mb-4">
        <!-- Total Floors Card -->
        <div class="col-md-4 mb-3">
            <div class="card border-primary">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted mb-2">Total Floors</h6>
                            <h2 class="mb-0" th:text="${totalFloors}">0</h2>
                        </div>
                        <div class="text-primary">
                            <i class="bi bi-building" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                    <a href="/floors" class="btn btn-sm btn-outline-primary mt-3 w-100">
                        <i class="bi bi-eye"></i> View Floors
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Total Lines Card -->
        <div class="col-md-4 mb-3">
            <div class="card border-success">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted mb-2">Total Lines</h6>
                            <h2 class="mb-0" th:text="${totalLines}">0</h2>
                        </div>
                        <div class="text-success">
                            <i class="bi bi-diagram-3" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                    <a href="/lines" class="btn btn-sm btn-outline-success mt-3 w-100">
                        <i class="bi bi-eye"></i> View Lines
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Total Machines Card -->
        <div class="col-md-4 mb-3">
            <div class="card border-info">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted mb-2">Total Machines</h6>
                            <h2 class="mb-0" th:text="${totalMachines}">0</h2>
                        </div>
                        <div class="text-info">
                            <i class="bi bi-gear-fill" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                    <a href="/machines" class="btn btn-sm btn-outline-info mt-3 w-100">
                        <i class="bi bi-eye"></i> View Machines
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="card mb-4">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-lightning-fill"></i> Quick Actions</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center">
                            <i class="bi bi-building-add text-primary" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">Manage Floors</h5>
                            <p class="text-muted">Add, edit, or delete floors</p>
                            <div class="d-grid gap-2">
                                <a href="/floors/create" class="btn btn-primary">
                                    <i class="bi bi-plus-circle"></i> Add Floor
                                </a>
                                <a href="/floors" class="btn btn-outline-primary">
                                    <i class="bi bi-list-ul"></i> View All
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center">
                            <i class="bi bi-diagram-3-fill text-success" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">Manage Lines</h5>
                            <p class="text-muted">Add, edit, or delete production lines</p>
                            <div class="d-grid gap-2">
                                <a href="/lines/create" class="btn btn-success">
                                    <i class="bi bi-plus-circle"></i> Add Line
                                </a>
                                <a href="/lines" class="btn btn-outline-success">
                                    <i class="bi bi-list-ul"></i> View All
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center">
                            <i class="bi bi-gear-wide-connected text-info" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">Manage Machines</h5>
                            <p class="text-muted">Add, edit, or delete machines</p>
                            <div class="d-grid gap-2">
                                <a href="/machines/create" class="btn btn-info">
                                    <i class="bi bi-plus-circle"></i> Add Machine
                                </a>
                                <a href="/machines" class="btn btn-outline-info">
                                    <i class="bi bi-list-ul"></i> View All
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- System Information -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-info-circle"></i> System Information</h5>
        </div>
        <div class="card-body">
            <ul class="list-unstyled mb-0">
                <li class="mb-2">
                    <strong>Hierarchy Limits:</strong>
                    <ul class="mt-1">
                        <li>Each Floor can have a maximum of <strong>10 Lines</strong></li>
                        <li>Each Line can have a maximum of <strong>10 Machines</strong></li>
                    </ul>
                </li>
                <li class="mb-2">
                    <strong>Access Level:</strong> <span class="badge bg-primary">Administrator</span>
                </li>
                <li>
                    <strong>Permissions:</strong> Full CRUD access to all entities
                </li>
            </ul>
        </div>
    </div>
    
</div>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{layout/base :: layout(~{::title}, ~{::content})}">
<head>
    <title>Line Management - SMT Management</title>
</head>
<body>
<div th:fragment="content">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">Line Management</h1>
        <a sec:authorize="hasRole('ADMIN')" href="/lines/create" class="btn btn-success">
            <i class="bi bi-plus-circle"></i> Add Line
        </a>
    </div>
    
    <!-- Alert Messages -->
    <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
        <i class="bi bi-check-circle"></i> <span th:text="${success}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle"></i> <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
    
    <!-- Search and Filter Bar -->
    <div class="card mb-4">
        <div class="card-body">
            <form method="get" action="/lines" class="row g-3">
                <div class="col-md-6">
                    <input type="text" name="search" class="form-control" 
                           placeholder="Search lines by name..." 
                           th:value="${search}">
                </div>
                <div class="col-md-4">
                    <select name="floorId" class="form-select">
                        <option value="">All Floors</option>
                        <option th:each="floor : ${floors}" 
                                th:value="${floor.id}" 
                                th:text="${floor.name}"
                                th:selected="${floor.id == selectedFloorId}">
                            Floor Name
                        </option>
                    </select>
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-primary w-100">
                        <i class="bi bi-search"></i> Search
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Lines Table -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">
                <i class="bi bi-diagram-3"></i> Lines
                <span class="badge bg-success" th:text="${totalItems}">0</span>
            </h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead class="table-light">
                        <tr>
                            <th>ID</th>
                            <th>Line Name</th>
                            <th>Floor</th>
                            <th>Lane Type</th>
                            <th>Direction</th>
                            <th>Machines</th>
                            <th sec:authorize="hasRole('ADMIN')">Actions</th>
                            <th sec:authorize="hasRole('OPERATOR')">View</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:if="${#lists.isEmpty(lines)}">
                            <td colspan="8" class="text-center text-muted">
                                <i class="bi bi-inbox"></i> No lines found
                            </td>
                        </tr>
                        <tr th:each="line : ${lines}">
                            <td th:text="${line.id}">1</td>
                            <td>
                                <strong th:text="${line.lineName}">Line Name</strong>
                            </td>
                            <td>
                                <span class="badge bg-primary" th:text="${line.floorName}">Floor</span>
                            </td>
                            <td>
                                <span class="badge" 
                                      th:classappend="${line.lane.name() == 'SINGLE_LANE'} ? 'bg-info' : 'bg-warning'"
                                      th:text="${#strings.replace(line.lane.name(), '_', ' ')}">
                                    Lane Type
                                </span>
                            </td>
                            <td>
                                <span th:if="${line.direction.name() == 'LEFT_TO_RIGHT'}">
                                    <i class="bi bi-arrow-right text-success"></i> L→R
                                </span>
                                <span th:if="${line.direction.name() == 'RIGHT_TO_LEFT'}">
                                    <i class="bi bi-arrow-left text-primary"></i> R→L
                                </span>
                            </td>
                            <td>
                                <span th:text="${line.machineCount}">0</span>
                                <span class="text-muted">/ 10</span>
                                <div class="progress mt-1" style="height: 5px;">
                                    <div class="progress-bar" 
                                         th:style="'width: ' + ${line.machineCount * 10} + '%'"
                                         th:classappend="${line.machineCount >= 10} ? 'bg-danger' : 'bg-success'">
                                    </div>
                                </div>
                            </td>
                            <td sec:authorize="hasRole('ADMIN')">
                                <div class="btn-group" role="group">
                                    <a th:href="@{/lines/edit/{id}(id=${line.id})}" 
                                       class="btn btn-sm btn-outline-primary" 
                                       title="Edit">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                    <button type="button" 
                                            class="btn btn-sm btn-outline-danger" 
                                            th:onclick="'checkDelete(' + ${line.id} + ')'"
                                            title="Delete">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </div>
                                <a th:href="@{/machines(lineId=${line.id})}" 
                                   class="btn btn-sm btn-outline-info ms-2" 
                                   title="View Machines">
                                    <i class="bi bi-gear"></i> Machines
                                </a>
                            </td>
                            <td sec:authorize="hasRole('OPERATOR')">
                                <a th:href="@{/machines(lineId=${line.id})}" 
                                   class="btn btn-sm btn-outline-primary" 
                                   title="View Machines">
                                    <i class="bi bi-eye"></i> View Machines
                                </a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <!-- Pagination -->
            <nav th:if="${totalPages > 1}" aria-label="Line pagination">
                <ul class="pagination justify-content-center mb-0">
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <a class="page-link" 
                           th:href="@{/lines(page=${currentPage - 1}, search=${search}, floorId=${selectedFloorId})}">
                            Previous
                        </a>
                    </li>
                    <li class="page-item" 
                        th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
                        th:classappend="${i == currentPage} ? 'active'">
                        <a class="page-link" 
                           th:href="@{/lines(page=${i}, search=${search}, floorId=${selectedFloorId})}"
                           th:text="${i + 1}">1</a>
                    </li>
                    <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled'">
                        <a class="page-link" 
                           th:href="@{/lines(page=${currentPage + 1}, search=${search}, floorId=${selectedFloorId})}">
                            Next
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal Placeholder -->
    <div id="deleteModalContainer"></div>
    
    <script>
        function checkDelete(lineId) {
            fetch('/lines/check-delete/' + lineId)
                .then(response => response.text())
                .then(html => {
                    document.getElementById('deleteModalContainer').innerHTML = html;
                    const modal = new bootstrap.Modal(document.getElementById('deleteConfirmModal'));
                    modal.show();
                })
                .catch(error => console.error('Error:', error));
        }
    </script>
    
</div>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(~{::title}, ~{::content})}">
<head>
    <title th:text="${line.id != null ? 'Edit Line' : 'Create Line'}">Line Form</title>
</head>
<body>
<div th:fragment="content">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">
            <span th:if="${line.id == null}">Create New Line</span>
            <span th:if="${line.id != null}">Edit Line</span>
        </h1>
        <a href="/lines" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left"></i> Back to List
        </a>
    </div>
    
    <!-- Line Form -->
    <div class="row">
        <div class="col-md-8 mx-auto">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">
                        <i class="bi bi-diagram-3"></i> Line Information
                    </h5>
                </div>
                <div class="card-body">
                    <form th:action="@{/lines/save}" th:object="${line}" method="post">
                        
                        <!-- Hidden ID field for edit -->
                        <input type="hidden" th:field="*{id}" />
                        
                        <!-- Line Name -->
                        <div class="mb-3">
                            <label for="lineName" class="form-label">
                                Line Name <span class="text-danger">*</span>
                            </label>
                            <input type="text" 
                                   class="form-control" 
                                   id="lineName" 
                                   th:field="*{lineName}" 
                                   placeholder="Enter line name (e.g., Line 1, Assembly Line A)"
                                   required
                                   minlength="2"
                                   maxlength="100">
                            <div class="form-text">
                                <i class="bi bi-info-circle"></i> 
                                Line name must be unique and between 2-100 characters
                            </div>
                        </div>
                        
                        <!-- Floor Selection -->
                        <div class="mb-3">
                            <label for="floorMapping" class="form-label">
                                Floor <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" 
                                    id="floorMapping" 
                                    th:field="*{floorMapping.id}" 
                                    required>
                                <option value="">Select a floor...</option>
                                <option th:each="floor : ${floors}" 
                                        th:value="${floor.id}" 
                                        th:text="${floor.name + ' (Lines: ' + floor.lineCount + '/10)'}">
                                    Floor Name
                                </option>
                            </select>
                            <div class="form-text">
                                <i class="bi bi-info-circle"></i> 
                                Select the floor this line belongs to (max 10 lines per floor)
                            </div>
                        </div>
                        
                        <!-- Lane Type -->
                        <div class="mb-3">
                            <label for="lane" class="form-label">
                                Lane Type <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="lane" th:field="*{lane}" required>
                                <option value="">Select lane type...</option>
                                <option th:each="laneType : ${laneTypes}" 
                                        th:value="${laneType}" 
                                        th:text="${#strings.replace(laneType.name(), '_', ' ')}">
                                    Lane Type
                                </option>
                            </select>
                            <div class="form-text">
                                <i class="bi bi-info-circle"></i> 
                                Choose between single lane or multi-lane configuration
                            </div>
                        </div>
                        
                        <!-- Direction -->
                        <div class="mb-3">
                            <label for="direction" class="form-label">
                                Direction <span class="text-danger">*</span>
                            </label>
                            <select class="form-select" id="direction" th:field="*{direction}" required>
                                <option value="">Select direction...</option>
                                <option th:each="dir : ${directions}" 
                                        th:value="${dir}">
                                    <span th:if="${dir.name() == 'LEFT_TO_RIGHT'}">Left to Right (→)</span>
                                    <span th:if="${dir.name() == 'RIGHT_TO_LEFT'}">Right to Left (←)</span>
                                </option>
                            </select>
                            <div class="form-text">
                                <i class="bi bi-info-circle"></i> 
                                Select the production flow direction
                            </div>
                        </div>
                        
                        <!-- Current Machines Info (for edit mode) -->
                        <div th:if="${line.id != null}" class="mb-3">
                            <label class="form-label">Current Machines</label>
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle"></i>
                                This line currently has <strong th:text="${line.machineCount}">0</strong> machine(s).
                                <span th:if="${line.machineCount < 10}">
                                    You can add <strong th:text="${10 - line.machineCount}">10</strong> more machine(s).
                                </span>
                                <span th:if="${line.machineCount >= 10}" class="text-danger">
                                    <br><strong>Maximum limit reached!</strong> Cannot add more machines.
                                </span>
                            </div>
                        </div>
                        
                        <!-- Info Box -->
                        <div class="alert alert-warning">
                            <h6 class="alert-heading">
                                <i class="bi bi-exclamation-triangle"></i> Important Information
                            </h6>
                            <ul class="mb-0">
                                <li>Each line can have a maximum of <strong>10 machines</strong></li>
                                <li>Each floor can have a maximum of <strong>10 lines</strong></li>
                                <li>Line names must be unique across the system</li>
                                <li>Deleting a line will also delete all its associated machines</li>
                            </ul>
                        </div>
                        
                        <!-- Form Actions -->
                        <div class="d-flex justify-content-between">
                            <a href="/lines" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i> Cancel
                            </a>
                            <button type="submit" class="btn btn-success">
                                <i class="bi bi-save"></i>
                                <span th:if="${line.id == null}">Create Line</span>
                                <span th:if="${line.id != null}">Update Line</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- View Machines (for edit mode) -->
            <div th:if="${line.id != null && line.hasMachines()}" class="card mt-3">
                <div class="card-header bg-info text-white">
                    <h6 class="mb-0">
                        <i class="bi bi-gear"></i> Associated Machines
                    </h6>
                </div>
                <div class="card-body">
                    <p>This line has <strong th:text="${line.machineCount}">0</strong> machine(s) associated with it.</p>
                    <a th:href="@{/machines(lineId=${line.id})}" class="btn btn-outline-info">
                        <i class="bi bi-eye"></i> View Machines
                    </a>
                </div>
            </div>
        </div>
    </div>
    
</div>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/base :: layout(~{::title}, ~{::content})}">
<head>
    <title>Operator Dashboard - SMT Management</title>
</head>
<body>
<div th:fragment="content">
    
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1 class="h3 mb-0">Operator Dashboard</h1>
        <div class="text-muted">
            <i class="bi bi-eye"></i> View-Only Access
        </div>
    </div>
    
    <!-- Statistics Cards -->
    <div class="row mb-4">
        <!-- Total Floors Card -->
        <div class="col-md-4 mb-3">
            <div class="card border-primary">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted mb-2">Total Floors</h6>
                            <h2 class="mb-0" th:text="${totalFloors}">0</h2>
                        </div>
                        <div class="text-primary">
                            <i class="bi bi-building" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                    <a href="/floors" class="btn btn-sm btn-outline-primary mt-3 w-100">
                        <i class="bi bi-eye"></i> View Floors
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Total Lines Card -->
        <div class="col-md-4 mb-3">
            <div class="card border-success">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted mb-2">Total Lines</h6>
                            <h2 class="mb-0" th:text="${totalLines}">0</h2>
                        </div>
                        <div class="text-success">
                            <i class="bi bi-diagram-3" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                    <a href="/lines" class="btn btn-sm btn-outline-success mt-3 w-100">
                        <i class="bi bi-eye"></i> View Lines
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Total Machines Card -->
        <div class="col-md-4 mb-3">
            <div class="card border-info">
                <div class="card-body">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="text-muted mb-2">Total Machines</h6>
                            <h2 class="mb-0" th:text="${totalMachines}">0</h2>
                        </div>
                        <div class="text-info">
                            <i class="bi bi-gear-fill" style="font-size: 3rem;"></i>
                        </div>
                    </div>
                    <a href="/machines" class="btn btn-sm btn-outline-info mt-3 w-100">
                        <i class="bi bi-eye"></i> View Machines
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Quick Navigation -->
    <div class="card mb-4">
        <div class="card-header bg-info text-white">
            <h5 class="mb-0"><i class="bi bi-compass"></i> Quick Navigation</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center">
                            <i class="bi bi-building text-primary" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">View Floors</h5>
                            <p class="text-muted">Browse all production floors</p>
                            <a href="/floors" class="btn btn-outline-primary w-100">
                                <i class="bi bi-list-ul"></i> View All Floors
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center">
                            <i class="bi bi-diagram-3 text-success" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">View Lines</h5>
                            <p class="text-muted">Browse all production lines</p>
                            <a href="/lines" class="btn btn-outline-success w-100">
                                <i class="bi bi-list-ul"></i> View All Lines
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-3">
                    <div class="card h-100 shadow-sm">
                        <div class="card-body text-center">
                            <i class="bi bi-gear text-info" style="font-size: 3rem;"></i>
                            <h5 class="mt-3">View Machines</h5>
                            <p class="text-muted">Browse all machines</p>
                            <a href="/machines" class="btn btn-outline-info w-100">
                                <i class="bi bi-list-ul"></i> View All Machines
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Access Information -->
    <div class="alert alert-info" role="alert">
        <h5 class="alert-heading"><i class="bi bi-info-circle-fill"></i> Operator Access</h5>
        <p class="mb-0">
            You have <strong>read-only</strong> access to the system. You can view all floors, lines, and machines, 
            but cannot create, modify, or delete any records. Contact an administrator for changes.
        </p>
    </div>
    
    <!-- System Information -->
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0"><i class="bi bi-info-circle"></i> System Information</h5>
        </div>
        <div class="card-body">
            <ul class="list-unstyled mb-0">
                <li class="mb-2">
                    <strong>Hierarchy Structure:</strong>
                    <ul class="mt-1">
                        <li>Each Floor contains up to 10 Lines</li>
                        <li>Each Line contains up to 10 Machines</li>
                    </ul>
                </li>
                <li class="mb-2">
                    <strong>Access Level:</strong> <span class="badge bg-info">Operator</span>
                </li>
                <li>
                    <strong>Permissions:</strong> View-only access to all entities
                </li>
            </ul>
        </div>
    </div>
    
</div>
</body>
</html><!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error - SMT Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container">
        <div class="row justify-content-center mt-5">
            <div class="col-md-6">
                <div class="card shadow">
                    <div class="card-body text-center p-5">
                        <i class="bi bi-exclamation-triangle-fill text-warning" style="font-size: 4rem;"></i>
                        <h1 class="mt-3" th:text="${status} ?: 'Error'">Error</h1>
                        <p class="text-muted" th:text="${error} ?: 'Something went wrong'">An error occurred</p>
                        
                        <div class="alert alert-danger mt-3" th:if="${message}">
                            <small th:text="${message}">Error details</small>
                        </div>
                        
                        <div class="mt-4">
                            <a href="/dashboard" class="btn btn-primary">
                                <i class="bi bi-house"></i> Go to Dashboard
                            </a>
                            <a href="/login" class="btn btn-outline-secondary">
                                <i class="bi bi-box-arrow-in-right"></i> Login
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
